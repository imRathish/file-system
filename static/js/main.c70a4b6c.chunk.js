(this["webpackJsonpfile-system"]=this["webpackJsonpfile-system"]||[]).push([[0],{116:function(e,t,n){"use strict";n.r(t);var i=n(0),c=n.n(i),r=n(12),a=n.n(r),l=n(18),o=n(163),s=n(180),d=n(186),u=n(177),j=n(169),f=n(176),b=n(118),O=n(28),h=n(15),p=n(77),m=n(44),x=function(e,t){return t?btoa("".concat(e,"/").concat(t)):btoa("".concat(e))},v="ROOT",y="FOLDER",g="FILE",D="New folder",F="My Drive",I=n(166),w=n(2),C=Object(o.a)((function(e){return{popover:{pointerEvents:"none"},paper:{padding:e.spacing(1)}}}));function S(e){var t=C(),n=e.anchor,i=e.handleClose,c=e.file,r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(0===e)return"0 Bytes";var n=1024,i=t<0?0:t,c=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,r)).toFixed(i))+" "+c[r]}(Object(l.c)((function(e){var t=e.fileSystem;return c.filesys_type===g?c.size:0===c.children.length?0:c.children.map((function(e){return t.find((function(t){return t.id===e})).size})).reduce((function(e,t){return e+t}))}))),a=Boolean(n);return Object(w.jsx)("div",{children:Object(w.jsx)(I.a,{id:"mouse-over-popover",className:t.popover,classes:{paper:t.paper},open:a,elevation:2,anchorEl:n,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:i,keepMounted:!0,disableRestoreFocus:!0,children:Object(w.jsxs)(j.a,{container:!0,direction:"column",spacing:1,children:[Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"caption",children:"Type: ".concat(c.filesys_type===y?"Folder":c.type)})}),Object(w.jsx)(j.a,{item:!0,children:NaN!==r&&Object(w.jsx)(b.a,{variant:"caption",children:"Size: ".concat(r)})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"caption",children:"Created Date: ".concat(c.createdDate)})})]})})})}var R=n(174),T=n(181),k=n(170),E=n(173),N=n(172),_=n(171);function z(e){var t=e.open,n=e.fileName,i=e.url,r=e.handleClose,a=c.a.useState(null),o=Object(O.a)(a,2),s=o[0],d=o[1],u=c.a.useState(null),j=Object(O.a)(u,2),f=j[0],b=j[1],h=Object(l.c)((function(e){return e.fileSystem.map((function(e){return e.id})).filter((function(e){return"ROOT"!==e}))})),p=function(e){if(e)return m(e)?void b("File/Folder already exists! Give a different name"):(r(e),void b(null));b(null),r()},m=function(e){return h.includes(x(i,e))};return Object(w.jsxs)(k.a,{open:t,onClose:function(){p(null)},"aria-labelledby":"form-dialog-title",children:[Object(w.jsx)(_.a,{id:"form-dialog-title",children:"Rename ".concat(n)}),Object(w.jsx)(N.a,{children:Object(w.jsx)(T.a,{autoFocus:!0,error:!!f,helperText:f,margin:"dense",id:"new-file-name",placeholder:"Enter new name",fullWidth:!0,onChange:function(e){d(e.target.value)}})}),Object(w.jsxs)(E.a,{children:[Object(w.jsx)(R.a,{onClick:function(){p(null)},color:"primary",children:"Cancel"}),Object(w.jsx)(R.a,{onClick:function(){p(s)},color:"primary",children:"Rename"})]})]})}var B="ADD_FOLDER",M="ADD_FILE",Y="DELETE_FOLDER",L="RENAME_FILE",A=function(e,t,n){return{type:Y,fileIds:e,rootDir:t,rootDirId:t===F?"ROOT":x(n)}},X=n(63),P=n.n(X),G=n(175),K=n(91),W=n(183),H=n(64),J=n.n(H),U=Object(o.a)((function(e){return{root:{display:"flex",padding:2,"&:hover":{backgroundColor:"#cde7fe"}}}}));function Z(e){var t=e.file,n=t.id,i=t.name,r=t.filesys_type,a=e.url,o=e.rootdir,s=e.isSelectedFile,d=e.selectedFiles,u=e.updateSelectedFiles,f=c.a.useState(null),v=Object(O.a)(f,2),D=v[0],I=v[1],C=c.a.useState(!1),R=Object(O.a)(C,2),T=R[0],k=R[1],E=Object(l.b)(),N=Object(l.c)((function(e){return e.fileSystem})),_=U(),B=Object(h.g)(),M=c.a.useState({mouseX:null,mouseY:null}),Y=Object(O.a)(M,2),X=Y[0],H=Y[1],Z=function(){H({mouseX:null,mouseY:null})},q=function(){I(null)},Q=function(e){var t=N.find((function(t){return t.id===e})),n=document.createElement("a");n.setAttribute("href","data:".concat(t.filesys_type,";charset=utf-8, ")+encodeURIComponent("Sample")),n.setAttribute("download",t.name),document.body.appendChild(n),n.click(),document.body.removeChild(n)};return Object(w.jsxs)("div",{children:[Object(w.jsx)(G.a,{onClickAway:function(e){e.ctrlKey||(I(null),u([]))},children:Object(w.jsxs)("div",{className:_.root,style:{backgroundColor:s?"#cde7fe":null},onContextMenu:function(e){e.preventDefault(),I(null),d.length>0&&!s&&u([]),0===X.mouseX&&0===X.mouseY||H({mouseX:null,mouseY:null}),H({mouseX:e.clientX-2,mouseY:e.clientY-4})},onDoubleClick:function(){r!==g&&B.push("".concat(a,"/").concat(i))},onClick:function(e){e.ctrlKey&&r!==y?u(s?d.filter((function(e){return e!==e})):[].concat(Object(m.a)(d),[n])):I(e.currentTarget)},onMouseLeave:q,children:[Object(w.jsxs)(j.a,{container:!0,direction:"column",alignItems:"center",children:[Object(w.jsxs)(j.a,{item:!0,children:[r===y&&Object(w.jsx)(P.a,{style:{fontSize:100,color:"#F8D775"}}),r===g&&Object(w.jsx)(J.a,{style:{fontSize:100,color:"#7d7d7d"}})]}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{align:"center",variant:"caption",children:i})})]}),Object(w.jsx)(S,{anchor:D,handleClose:q,file:e.file})]})}),Object(w.jsxs)(K.a,{keepMounted:!0,open:null!==X.mouseY,onClose:Z,anchorReference:"anchorPosition",anchorPosition:null!==X.mouseY&&null!==X.mouseX?{top:X.mouseY,left:X.mouseX}:void 0,children:[Object(w.jsx)(W.a,{id:"Delete-file",onClick:function(){d.length>0?E(A(d,o,a)):E(A([n],o,a)),Z()},children:"Delete"}),0===d.length&&Object(w.jsx)(W.a,{id:"Raname-file",onClick:function(){k(!0),Z(),I(null)},children:"Rename"}),r!==y&&Object(w.jsx)(W.a,{id:"Download-file",onClick:function(){if(q(),Z(),d.length>0){var e,t=Object(p.a)(d);try{for(t.s();!(e=t.n()).done;){var i=e.value;Q(i)}}catch(c){t.e(c)}finally{t.f()}}else Q(n)},children:"Download"})]}),Object(w.jsx)(z,{open:T,handleClose:function(e){e&&E(function(e,t,n,i,c){return{type:L,oldFileId:e,newFileName:t,rootDirId:n===F?"ROOT":x(c),newFileId:x(c,t),rootDir:n,filesys_type:i}}(n,e,o,r,a)),k(!1),Z(),I(null)},fileName:i,url:a})]})}var q=n.p+"static/media/addFiles.baa96afa.png";function Q(e){var t=e.rootdir,n=e.url,i=c.a.useState([]),r=Object(O.a)(i,2),a=r[0],o=r[1],s=Object(h.g)(),d=Object(l.c)((function(e){var i=e.fileSystem,c=i.find((function(e){return e.id===(t===F?"ROOT":x(n))}));return c?c.children.map((function(e){return i.find((function(t){return t.id===e}))})):(s.push("/"),[])}));return Object(w.jsx)(w.Fragment,{children:d.length>0?d.map((function(e){var i=a.includes(e.id);return Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(Z,{file:e,rootdir:t,url:n,selectedFiles:a,isSelectedFile:i,updateSelectedFiles:o})})})):Object(w.jsxs)(j.a,{item:!0,container:!0,spacing:2,justify:"center",alignItems:"center",style:{marginTop:"20vh"},direction:"column",children:[Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)("img",{src:q,style:{width:"100%",height:200}})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"body1",children:"Start uploading files....."})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"body2",children:"Note: Only meta data of the files are used while uploading and downloading assets. Contents of the assets are not stored"})})]})})}var V=n(84),$=n.n(V),ee=n(85),te=n.n(ee),ne=n(184),ie=n(29),ce=n(182);function re(e){var t=Object(h.g)(),n=Object(l.c)((function(e){var t=e.fileSystem;if(t)return t.filter((function(e){return"FILE"===e.filesys_type}))}));return Object(w.jsx)(ce.a,{id:"country-select-demo",style:{width:300},options:n,autoHighlight:!0,getOptionLabel:function(e){return"".concat(e.name)},onChange:function(e,n){n.filesys_type!==y?n.filesys_type!==v&&"ROOT"!==n.parent?t.push(atob(n.parent)):t.push("/"):t.push(atob(n.id))},size:"small",renderInput:function(e){return Object(w.jsx)(T.a,Object(ie.a)(Object(ie.a)({},e),{},{size:"small",variant:"outlined",placeholder:"Search files"}))}})}function ae(e){var t=e.rootDir,n=e.url,i=Object(l.b)(),r=c.a.useRef(null),a=c.a.useState(null),o=Object(O.a)(a,2),s=o[0],d=o[1],u=Object(l.c)((function(e){return e.fileSystem.map((function(e){return e.id})).filter((function(e){return"ROOT"!==e}))}));return Object(w.jsxs)("div",{children:[Object(w.jsxs)(j.a,{item:!0,container:!0,alignItems:"center",spacing:3,children:[Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(R.a,{size:"small",variant:"text",startIcon:Object(w.jsx)($.a,{style:{color:"#F8D775"}}),onClick:function(){u.includes(x(n,D))?d("".concat(D," already exists")):i(function(e,t){return{type:B,rootDir:e,parentPath:t,rootDirId:e===F?"ROOT":x(t)}}(t,n))},children:"New folder"})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(R.a,{size:"small",variant:"text",startIcon:Object(w.jsx)(te.a,{style:{color:"green"}}),onClick:function(){r.current.click()},children:"Upload File"})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(re,{})})]}),Object(w.jsx)("input",{id:"upload-file",ref:r,onChange:function(e){var c=Object.values(e.target.files);if(c.length>0){var r=[];c=c.filter((function(e){if(!u.includes(x(n,e.name)))return!0;r.push(e.name)})),r.length>0&&d("File exists"),c.length>0&&i(function(e,t,n){return{type:M,files:e,rootDir:t,parentPath:n,rootDirId:t===F?"ROOT":x(n)}}(c,t,n))}},type:"file",hidden:!0,multiple:!0}),Object(w.jsx)(ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!!s,autoHideDuration:3e3,onClose:function(e,t){"clickaway"!==t&&d(null)},message:s})]})}var le=n(86),oe=n.n(le),se=Object(o.a)((function(e){return{container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}}));function de(){var e=se(),t=Object(h.h)().fileName,n=Object(h.i)(),i=n.url,c=n.isExact,r=Object(h.g)();return Object(w.jsxs)("div",{children:[c&&Object(w.jsx)(u.a,{maxWidth:"lg",className:e.container,children:Object(w.jsxs)(j.a,{container:!0,spacing:5,children:[Object(w.jsxs)(j.a,{item:!0,container:!0,justify:"space-between",children:[Object(w.jsxs)(j.a,{item:!0,container:!0,spacing:3,md:3,alignItems:"center",children:[Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(f.a,{onClick:function(){r.goBack()},children:Object(w.jsx)(oe.a,{})})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"h5",children:t})})]}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(ae,{rootDir:t,url:i})})]}),Object(w.jsx)(j.a,{item:!0,container:!0,spacing:5,children:Object(w.jsx)(Q,{rootdir:t,url:i})})]})}),Object(w.jsx)(h.d,{children:Object(w.jsx)(h.b,{path:"".concat(i,"/:fileName"),children:Object(w.jsx)(de,{})})})]})}var ue=n(178),je=n(179),fe=n(88),be=n.n(fe),Oe=n(89),he=n.n(Oe),pe=n(185),me=n(90),xe=n.n(me),ve=n(87),ye=n.n(ve),ge=Object(o.a)((function(e){return{root:{flexGrow:1,maxWidth:400,marginTop:20}}}));function De(){var e=ge(),t=Object(l.c)((function(e){return e.fileSystem})),n=Object(h.g)(),i=function(e){e.filesys_type!==y?e.filesys_type!==v&&"ROOT"!==e.parent?n.push(atob(e.parent)):n.push("/"):n.push(atob(e.id))};return Object(w.jsx)("div",{children:Object(w.jsxs)(j.a,{container:!0,direction:"column",spacing:2,children:[Object(w.jsxs)(j.a,{item:!0,container:!0,spacing:3,alignItems:"center",children:[Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(ye.a,{style:{fontSize:40,color:"#6b96e4"}})}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"h5",children:"Asset Drive"})})]}),Object(w.jsx)(ue.a,{}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(je.a,{className:e.root,defaultCollapseIcon:Object(w.jsx)(be.a,{}),defaultExpanded:["root"],defaultExpandIcon:Object(w.jsx)(he.a,{}),children:function t(n){var c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ROOT",r=n.find((function(e){return e.id===c}));return Object(w.jsx)(pe.a,{nodeId:r.id,label:Object(w.jsxs)(j.a,{container:!0,spacing:1,alignItems:"center",children:[Object(w.jsx)(j.a,{item:!0,children:Fe(r.filesys_type)}),Object(w.jsx)(j.a,{item:!0,children:Object(w.jsx)(b.a,{variant:"body2",className:e.labelText,children:r.name})})]}),onClick:function(){i(r)},children:Array.isArray(r.children)?r.children.map((function(e){return t(n,e)})):null},r.id)}(t)})})]})})}var Fe=function(e){return"ROOT"===e?Object(w.jsx)(xe.a,{}):e===g?Object(w.jsx)(J.a,{style:{color:"#7d7d7d"}}):e===y?Object(w.jsx)(P.a,{style:{color:"#F8D775"}}):void 0},Ie=Object(o.a)((function(e){return{root:{display:"flex"},drawer:{position:"relative",width:300,padding:20},content:{flexGrow:1,height:"100vh",overflowY:"auto",overflowX:"hidden"},appBarSpacer:e.mixins.toolbar,container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)}}}));var we=function(){var e=Ie();return Object(w.jsxs)("div",{className:e.root,children:[Object(w.jsx)(s.a,{}),Object(w.jsx)(d.a,{variant:"permanent",classes:{paper:e.drawer},children:Object(w.jsx)(De,{})}),Object(w.jsx)("main",{className:e.content,children:Object(w.jsxs)(h.d,{children:[Object(w.jsx)(h.b,{path:"/:fileName",children:Object(w.jsx)(de,{})}),Object(w.jsx)(h.b,{path:"/",children:Object(w.jsx)(h.a,{to:"/My Drive"})})]})})]})},Ce=n(66),Se=[{filesys_type:"ROOT",id:"ROOT",name:F,children:[]}];var Re=Object(Ce.a)({fileSystem:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:var n=D,i=x(t.parentPath,n),c=e.map((function(e){return e.id===t.rootDirId?Object(ie.a)(Object(ie.a)({},e),{},{children:e.children.concat(i)}):e})),r=new Date;return[].concat(Object(m.a)(c),[{filesys_type:y,size:0,id:i,name:n,parent:t.rootDirId,children:[],createdDate:"".concat(r.getDate(),"/").concat(r.getMonth()+1,"/").concat(r.getFullYear())}]);case M:var a=e.map((function(e){if(e.id===t.rootDirId){var n,i=Object.values(t.files);if(0===i.length)return;return Object(ie.a)(Object(ie.a)({},e),{},{size:e.size+i.map((function(e){return e.size})).reduce((function(e,t){return e+t})),children:(n=e.children).concat.apply(n,Object(m.a)(i.map((function(e){return x(t.parentPath,e.name)}))))})}return e})),l=new Date;return[].concat(Object(m.a)(a),Object(m.a)(Object.values(t.files).map((function(e){return{filesys_type:g,id:x(t.parentPath,e.name),parent:t.rootDirId,name:e.name,size:e.size,type:e.type,createdDate:"".concat(l.getDate(),"/").concat(l.getMonth()+1,"/").concat(l.getFullYear())}}))));case Y:var o=e.map((function(e){return e.id===t.rootDirId?Object(ie.a)(Object(ie.a)({},e),{},{children:e.children.filter((function(e){return!t.fileIds.includes(e)}))}):e})).filter((function(e){return!t.fileIds.includes(e.id)&&!t.fileIds.includes(e.parent)}));return o;case L:var s=e.map((function(e){if(e.id===t.oldFileId)if(e.id=t.newFileId,e.filesys_type===g){var n=e.name.split(".")[1];e.name="".concat(t.newFileName,".").concat(n)}else e.name=t.newFileName;return e.id===t.rootDirId&&(e.children=e.children.map((function(e){return e===t.oldFileId?t.newFileId:e}))),t.filesys_type===y&&e.parent===t.oldFileId&&(e.parent=t.newFileId),e}));return s;default:return e}}}),Te=Object(Ce.b)(Re),ke=n(34);a.a.render(Object(w.jsx)(c.a.StrictMode,{children:Object(w.jsx)(ke.a,{children:Object(w.jsx)(l.a,{store:Te,children:Object(w.jsx)(we,{})})})}),document.getElementById("root"))}},[[116,1,2]]]);
//# sourceMappingURL=main.c70a4b6c.chunk.js.map